import{j as e,r as o,u as H}from"./index-BfT1rnvf.js";import{r as w,a as y,p as z,w as F,S,L as T,T as A}from"./sweetalert2-react-content.es-B42hxaPu.js";import{u as q,F as k,P as D}from"./formField-BpgQnyyo.js";class M{list(t="1"){return w.get(`${y.Players}?&page=${t}`).then(s=>s)}get(t){return w.get(`${y.Players}/${t}`).then(s=>s)}store(t){return w.post(`${y.Players}`,t).then(s=>s)}update(t,s){return w.put(`${y.Players}/${t}`,s).then(a=>a)}destroy(t){return w.delete(`${y.Players}/${t}`).then(s=>s)}}const J=({name:n,label:t,options:s,register:a,error:i,required:f,placeholder:x,onChange:j,classDiv:p,classLabel:b,classSelect:d,defaultValue:m})=>e.jsxs("div",{className:p,children:[e.jsx("label",{htmlFor:n,className:(i?"text-red-900":"text-gray-900")+" block mb-2 text-sm font-medium dark:text-white "+b,children:t}),e.jsxs("select",{className:(i?"bg-red-50 border border-red-300 text-red-900":"bg-gray-50 border border-gray-300 text-gray-900")+" focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 text-sm rounded-lg "+d,id:n,...a(n,{required:f}),required:f,onChange:j,children:[x&&e.jsx("option",{value:"",children:x}),s.map(h=>e.jsx("option",{value:h.value,selected:h.label===m,children:h.label},h.value))]}),i&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-500",children:i})]}),N=new M,R=({setOpenModal:n,player:t})=>{const s=F(S),[a,i]=o.useState({}),[f,x]=o.useState(null),[j,p]=o.useState(!1),{reset:b,setValue:d,register:m,handleSubmit:h}=q();o.useEffect(()=>{t?(d("id",t.id),d("name",t.name),d("class",t.class),d("xp",t.xp),d("confirmed",t.confirmed)):d("confirmed",!1)},[t]);const v=u=>{const g={name:u.name,class:u.class,xp:u.xp,confirmed:u.confirmed};p(!0),u.id?N.update(u.id,g).then(l=>{l.message&&x(l.message),b(),s.fire({icon:"success",title:"Sucesso!",text:l.message||"",showConfirmButton:!1,timer:2e3}).then(()=>{window.location.replace("/players")})}).catch(l=>{i(l)}).finally(()=>{p(!1)}):N.store(g).then(l=>{l.message&&x(l.message),b(),s.fire({icon:"success",title:"Sucesso!",text:l.message||"",showConfirmButton:!1,timer:2e3}).then(()=>{window.location.replace("/players")})}).catch(l=>{i(l)}).finally(()=>{p(!1)})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"bg-gray-900/50 fixed inset-0 z-40",children:e.jsx("div",{id:"default-modal","aria-hidden":"true",className:"flex overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full",children:e.jsx("div",{className:"relative p-4 w-full max-w-2xl max-h-full",children:e.jsx("div",{className:"relative bg-white rounded-lg shadow",children:e.jsxs("form",{onSubmit:h(v),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:t!=null&&t.id?"Atualizar Jogador":"Novo Jogador"}),e.jsxs("button",{onClick:()=>{n(!1)},type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center","data-modal-hide":"default-modal",children:[e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e.jsx("span",{className:"sr-only",children:"Fechar"})]})]}),e.jsxs("div",{className:"p-4 space-y-4 md:p-5",children:[e.jsxs("div",{className:"w-full",children:[f&&e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-teal-100 border border-teal-400 text-teal-700 px-4 py-3 rounded relative",role:"alert",children:e.jsx("span",{className:"block sm:inline",children:f})})}),a.message&&e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:e.jsx("span",{className:"block sm:inline",children:a.message})})})]}),e.jsx(k,{name:"name",label:"Nome",type:"text",register:m,error:a.name,required:!0,placeholder:""}),e.jsx(J,{name:"class",label:"Classe",options:Object.entries(z).map(([u,g])=>({value:g,label:g})),register:m,error:a.class,required:!0,placeholder:"Selecione uma opção"}),e.jsx(k,{name:"xp",label:"XP",type:"number",register:m,error:a.xp,required:!0,placeholder:""}),e.jsx(k,{name:"confirmed",label:"Confirmado para a sessão",type:"checkbox",register:m,error:a.confirmed,placeholder:""})]}),e.jsxs("div",{className:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b",children:[e.jsx("button",{disabled:j,type:"submit","data-modal-hide":"default-modal",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center",children:"Salvar"}),e.jsx("button",{onClick:()=>{n(!1)},"data-modal-hide":"default-modal",type:"button",className:"py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-10",children:"Fechar"})]})]})})})})})})},C=new M;function G(){const n=F(S),[t,s]=o.useState(!0),[a,i]=o.useState(!1),[f,x]=o.useState(null),[j,p]=o.useState([]),[b,d]=o.useState([]),[m]=H(),[h,v]=o.useState({from:0,to:0,total:0}),[u,g]=o.useState([]),l=["Nome","Classe","XP","Confirmado","#"],[P,O]=o.useState(m.get("filter")),[L,X]=o.useState(m.get("page"));o.useEffect(()=>{console.log(P,L),C.list().then(r=>{p(r.data),d(r.data.map(c=>({id:c.id,name:c.name,class:c.class,xp:c.xp,confirmed:c.confirmed?"sim":"não"}))),v({from:r.from,to:r.to,total:r.total}),g(r.links)}).finally(()=>{s(!1)})},[]),o.useEffect(()=>{a===!1&&x(null)},[a]);const V=r=>{const c=j.find(E=>E.id===r.id);c?(x({...c}),i(!0)):n.fire({icon:"error",title:"Oops...",text:"Algo deu errado!"})},B=r=>{n.fire({title:"Tem certeza?",text:"Você não poderá reverter isso!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim, deletar!",cancelButtonText:"Cancelar"}).then(c=>{c.isConfirmed&&C.destroy(r.id).then(()=>{n.fire({title:"Excluído!",text:"Registro foi excluído.",icon:"success"}).then(()=>{window.location.replace("/players")})})})},$=r=>e.jsxs("div",{className:"space-x-1",children:[e.jsx("button",{title:"Editar operação.",onClick:()=>r.name&&V(r),className:"text-white bg-gray-700 hover:bg-gray-800 focus:ring-4 focus:outline-none focus:ring-gray-300 font-medium rounded-lg text-sm px-2 py-2",children:e.jsx("svg",{className:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M12 3.99997H6C4.89543 3.99997 4 4.8954 4 5.99997V18C4 19.1045 4.89543 20 6 20H18C19.1046 20 20 19.1045 20 18V12M18.4142 8.41417L19.5 7.32842C20.281 6.54737 20.281 5.28104 19.5 4.5C18.7189 3.71895 17.4526 3.71895 16.6715 4.50001L15.5858 5.58575M18.4142 8.41417L12.3779 14.4505C12.0987 14.7297 11.7431 14.9201 11.356 14.9975L8.41422 15.5858L9.00257 12.6441C9.08001 12.2569 9.27032 11.9013 9.54951 11.6221L15.5858 5.58575M18.4142 8.41417L15.5858 5.58575",stroke:"#FFF","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})})}),e.jsx("button",{title:"Deletar operação.",onClick:()=>r.name&&B(r),className:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-2 py-2",children:e.jsxs("svg",{className:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M10 12V17",stroke:"#FFF","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e.jsx("path",{d:"M14 12V17",stroke:"#FFF","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e.jsx("path",{d:"M4 7H20",stroke:"#FFF","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e.jsx("path",{d:"M6 10V18C6 19.6569 7.34315 21 9 21H15C16.6569 21 18 19.6569 18 18V10",stroke:"#FFF","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e.jsx("path",{d:"M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5V7H9V5Z",stroke:"#FFF","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]})})]});return e.jsx("div",{children:e.jsxs("section",{children:[e.jsxs("div",{className:"py-8 px-4 mx-auto md:container sm:pb-24 md:px-6 lg:px-6",children:[e.jsx("div",{className:"mb-8 lg:mb-16 max-w-3xl mx-auto  w-full",children:e.jsx("h2",{className:"mb-5 text-4xl leading-[44px] md:text-center  font-semibold text-gray-900 dark:text-white",children:"Jogadores"})}),e.jsx("div",{className:"flex justify-center",children:t?e.jsx(T,{}):e.jsxs("div",{className:"relative h-full w-full rounded bg-white shadow",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between m-3 space-y-2 md:space-y-0 md:space-x-2",children:[e.jsx("form",{action:"",method:"get",className:"w-full"}),e.jsx("div",{className:"flex flex-row space-x-1",children:e.jsx("button",{title:"Criar nova operação.",onClick:()=>{i(!0)},type:"submit",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2",children:e.jsx("svg",{className:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{id:"Vector",d:"M8 12H12M12 12H16M12 12V16M12 12V8M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21Z",stroke:"#fff","stroke-linecap":"round","stroke-linejoin":"round"})})})})]}),e.jsx(A,{headers:l,data:b,renderAction:$}),e.jsx(D,{pagination:h,links:u})]})})]}),a&&e.jsx(R,{player:f,setOpenModal:i})]})})}export{G as default};
